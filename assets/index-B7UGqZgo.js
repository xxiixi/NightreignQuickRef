import{r as he,a as me}from"./react-vendor-C6Ba5J37.js";import{r as w,T as $,a as L,D as pe,S as W,B as O,R as ge,b as fe,P as J,c as xe,d as ve,e as ye,f as we,g as be,I as je,h as ke,s as H,i as Se,j as Q,F as A,k as V,l as G,C as Ee,m as _e,n as q,o as K,p as Ce,A as Te,q as le,t as R,u as De}from"./antd-vendor-BWXfoIL1.js";(function(){const c=document.createElement("link").relList;if(c&&c.supports&&c.supports("modulepreload"))return;for(const t of document.querySelectorAll('link[rel="modulepreload"]'))l(t);new MutationObserver(t=>{for(const u of t)if(u.type==="childList")for(const d of u.addedNodes)d.tagName==="LINK"&&d.rel==="modulepreload"&&l(d)}).observe(document,{childList:!0,subtree:!0});function r(t){const u={};return t.integrity&&(u.integrity=t.integrity),t.referrerPolicy&&(u.referrerPolicy=t.referrerPolicy),t.crossOrigin==="use-credentials"?u.credentials="include":t.crossOrigin==="anonymous"?u.credentials="omit":u.credentials="same-origin",u}function l(t){if(t.ep)return;t.ep=!0;const u=r(t);fetch(t.href,u)}})();var F={exports:{}},P={};/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Y;function Ne(){if(Y)return P;Y=1;var a=he(),c=Symbol.for("react.element"),r=Symbol.for("react.fragment"),l=Object.prototype.hasOwnProperty,t=a.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,u={key:!0,ref:!0,__self:!0,__source:!0};function d(o,m,n){var i,g={},v=null,f=null;n!==void 0&&(v=""+n),m.key!==void 0&&(v=""+m.key),m.ref!==void 0&&(f=m.ref);for(i in m)l.call(m,i)&&!u.hasOwnProperty(i)&&(g[i]=m[i]);if(o&&o.defaultProps)for(i in m=o.defaultProps,m)g[i]===void 0&&(g[i]=m[i]);return{$$typeof:c,type:o,key:v,ref:f,props:g,_owner:t.current}}return P.Fragment=r,P.jsx=d,P.jsxs=d,P}var Z;function Ie(){return Z||(Z=1,F.exports=Ne()),F.exports}var e=Ie(),M={},X;function Re(){if(X)return M;X=1;var a=me();return M.createRoot=a.createRoot,M.hydrateRoot=a.hydrateRoot,M}var Le=Re();function ee(a,c,r,l,t,u,d){try{var o=a[u](d),m=o.value}catch(n){r(n);return}o.done?c(m):Promise.resolve(m).then(l,t)}function Pe(a){return function(){var c=this,r=arguments;return new Promise(function(l,t){var u=a.apply(c,r);function d(m){ee(u,l,t,d,o,"next",m)}function o(m){ee(u,l,t,d,o,"throw",m)}d(void 0)})}}function Ae(a,c){var r,l,t,u,d={label:0,sent:function(){if(t[0]&1)throw t[1];return t[1]},trys:[],ops:[]};return u={next:o(0),throw:o(1),return:o(2)},typeof Symbol=="function"&&(u[Symbol.iterator]=function(){return this}),u;function o(n){return function(i){return m([n,i])}}function m(n){if(r)throw new TypeError("Generator is already executing.");for(;d;)try{if(r=1,l&&(t=n[0]&2?l.return:n[0]?l.throw||((t=l.return)&&t.call(l),0):l.next)&&!(t=t.call(l,n[1])).done)return t;switch(l=0,t&&(n=[n[0]&2,t.value]),n[0]){case 0:case 1:t=n;break;case 4:return d.label++,{value:n[1],done:!1};case 5:d.label++,l=n[1],n=[0];continue;case 7:n=d.ops.pop(),d.trys.pop();continue;default:if(t=d.trys,!(t=t.length>0&&t[t.length-1])&&(n[0]===6||n[0]===2)){d=0;continue}if(n[0]===3&&(!t||n[1]>t[0]&&n[1]<t[3])){d.label=n[1];break}if(n[0]===6&&d.label<t[1]){d.label=t[1],t=n;break}if(t&&d.label<t[2]){d.label=t[2],d.ops.push(n);break}t[2]&&d.ops.pop(),d.trys.pop();continue}n=c.call(a,d)}catch(i){n=[6,i],l=0}finally{r=t=0}if(n[0]&5)throw n[1];return{value:n[0]?n[1]:void 0,done:!0}}}var Oe=function(){var a=w.useState({sitePv:"0",pagePv:"0",siteUv:"0"}),c=a[0],r=a[1],l=w.useRef(!1),t=function(){return"https://events.vercount.one"},u=function(){for(var o=window.screen.width+"x"+window.screen.height+"x"+window.screen.colorDepth,m=Intl.DateTimeFormat().resolvedOptions().timeZone||"",n=navigator.languages?navigator.languages.join(","):navigator.language||"",i=document.createElement("canvas"),g=i.getContext("webgl"),v=g?g.getParameter(g.RENDERER):"",f=[o,m,n,navigator.userAgent,v,new Date().getTimezoneOffset()].join("|"),b=0,S=0;S<f.length;S++)b=(b<<5)-b+f.charCodeAt(S),b=b&b;return Math.abs(b).toString(36)},d=Pe(function(){var o,m,n,i,g,v,f,b,S,E,_,N,p,h,s,x,y,j,k,C,D;return Ae(this,function(T){switch(T.label){case 0:o=t(),m=""+o+"/api/v2/log",n=u(),T.label=1;case 1:T.trys.push([1,9,,10]),T.label=2;case 2:return T.trys.push([2,5,,8]),[4,fetch(m,{method:"POST",headers:{"Content-Type":"application/json","X-Browser-Token":n},body:JSON.stringify({url:window.location.href,token:n,version:"v2"})})];case 3:return i=T.sent(),[4,i.json()];case 4:if(g=T.sent(),g.status==="success"&&g.data)v=g.data,f=v.site_pv,b=v.page_pv,S=v.site_uv,E={sitePv:f.toString(),pagePv:b.toString(),siteUv:S.toString()},r(E),localStorage.setItem("visitorCountData",JSON.stringify(E));else throw console.warn("API returned error:",g.message),new Error(g.message||"API error");return[3,8];case 5:return _=T.sent(),console.warn("CORS error with token header, retrying without custom header:",_),[4,fetch(m,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({url:window.location.href,token:n,version:"v2"})})];case 6:return N=T.sent(),[4,N.json()];case 7:if(p=T.sent(),p.status==="success"&&p.data)h=p.data,s=h.site_pv,x=h.page_pv,y=h.site_uv,j={sitePv:s.toString(),pagePv:x.toString(),siteUv:y.toString()},r(j),localStorage.setItem("visitorCountData",JSON.stringify(j));else throw console.warn("API returned error:",p.message),new Error(p.message||"API error");return[3,8];case 8:return[3,10];case 9:if(k=T.sent(),console.error("Error fetching visitor count:",k),C=localStorage.getItem("visitorCountData"),C)try{D=JSON.parse(C),r(D),console.log("Using cached visitor count data")}catch(ue){console.error("Error parsing cached data:",ue)}return[3,10];case 10:return[2]}})});return w.useEffect(function(){if(!l.current){var o=localStorage.getItem("visitorCountData");if(o)try{r(JSON.parse(o))}catch(m){console.error("Error parsing stored visitor data:",m)}d(),l.current=!0}},[]),c};const Me="/NightreignQuickRef/assets/logo-circle-Dt_-MttP.png",{Title:ze,Text:$e}=$,Fe=({isDarkMode:a,onToggleTheme:c,onToggleLanguage:r,onTabChange:l})=>{const[t,u]=w.useState(!1),{sitePv:d,pagePv:o,siteUv:m}=Oe(),n=[{key:"词条详细数据",label:"词条详细数据",children:"包括局外词条(xxxx)、局内词条、护符词条等。"},{key:"传说武器详情",label:"传说武器详情",children:"查看不同角色使用传说武器的强度面板，以及各武器的庇佑效果。"},{key:"角色数据",label:"角色数据",children:"查看角色相关数据，包括角色属性、无敌帧长度对比、隐士出招表。"},{key:"功能4",label:"其他功能",children:"更多功能模块，持续开发中..."}],i=()=>{u(!t)},g=({key:f})=>{l(f),u(!1)},v={items:n.map(f=>({key:f.key,label:e.jsxs("div",{style:{padding:"12px 0"},children:[e.jsx("div",{style:{fontWeight:"bold",marginBottom:"6px",fontSize:"14px",color:"#1890ff"},children:f.label}),e.jsx("div",{style:{fontSize:"12px",color:"#666",lineHeight:"1.4"},children:f.children})]})})),onClick:g};return e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"fixed-logo",children:e.jsx(L,{title:"功能导航",placement:"right",children:e.jsx(pe,{menu:v,open:t,onOpenChange:u,placement:"bottomLeft",trigger:["click"],overlayClassName:"logo-dropdown",children:e.jsx("div",{className:"logo-container",onClick:i,style:{cursor:"pointer"},children:e.jsx("img",{src:Me,alt:"Nightreign Logo"})})})})}),e.jsx("div",{className:"top-bar",children:e.jsx("div",{className:"top-bar-content",children:e.jsx("div",{className:"top-bar-right",children:e.jsxs(W,{size:"middle",children:[e.jsx(L,{title:a?"切换到亮色模式":"切换到暗色模式",placement:"bottom",children:e.jsx(O,{type:"text",icon:a?e.jsx(ge,{}):e.jsx(fe,{}),onClick:c,className:"theme-toggle-btn"})}),e.jsx(L,{title:"查看访问量",placement:"bottom",className:"theme-toggle-btn",children:e.jsx(J,{content:e.jsxs("div",{style:{padding:"5px"},children:[e.jsxs("div",{style:{fontSize:"12px"},children:["本站总访客数 ",e.jsx("span",{style:{color:"#1890ff"},children:m})," 人"]}),e.jsxs("div",{style:{fontSize:"12px"},children:["本站总访问量 ",e.jsx("span",{style:{color:"#1890ff"},children:d})," 次"]}),e.jsxs("div",{style:{fontSize:"12px"},children:["本页访问量 ",e.jsx("span",{style:{color:"#1890ff"},children:o})," 次"]}),e.jsx("div",{style:{marginTop:"4px",borderTop:"1px solid rgba(198, 198, 198, 0.2)",paddingTop:"4px",fontSize:"12px",color:"#999"},children:"统计服务: Vercount"})]}),placement:"bottom",trigger:"click",children:e.jsx(O,{type:"text",icon:e.jsx(xe,{}),className:"visits-counter-btn"})})}),e.jsx(L,{title:"查看数据来源",placement:"bottom",className:"theme-toggle-btn",children:e.jsx(J,{content:e.jsx("div",{style:{padding:"8px"},children:e.jsx("a",{href:"https://github.com/xxiixi/NightreignQuickRef/tree/main/reference",target:"_blank",rel:"noopener noreferrer",className:"footer-link",children:"reference/raw_data"})}),placement:"bottom",trigger:"click",children:e.jsx(O,{type:"text",icon:e.jsx(ve,{}),className:"visits-counter-btn"})})}),e.jsx(L,{title:"切换语言功能尚未开发",placement:"bottom",children:e.jsx(O,{type:"text",icon:e.jsx(ye,{}),onClick:r,className:"language-toggle-btn"})})]})})})}),e.jsxs("div",{className:"header",children:[e.jsx(ze,{level:1,className:"main-title",children:"Nightreign Reference Notebook"}),e.jsx(W,{direction:"vertical",size:"small",className:"subtitle",children:e.jsx($e,{type:"secondary",className:"subtitle-text",children:"黑夜君临内容速查工具，可快速检索条目信息，后续会添加更多内容"})})]})]})},{Text:te}=$,Be=()=>e.jsx("div",{className:"footer",children:e.jsxs(W,{direction:"vertical",size:"small",align:"center",children:[e.jsxs(te,{type:"secondary",className:"footer-text",children:[e.jsx(we,{style:{marginRight:"4px",color:"#ff4d4f"}}),"Created by"," ","Cecilia"," ","｜"," ",e.jsx(be,{style:{marginRight:"4px"}}),"Report an issue on"," ",e.jsx("a",{href:"https://github.com/xxiixi/NightreignQuickRef",target:"_blank",rel:"noopener noreferrer",className:"footer-link",children:"NightreignQuickRef"})]}),e.jsxs(te,{type:"secondary",className:"footer-text",children:["© ",new Date().getFullYear()," NightreignQuickRef · All Rights Reserved · Last updated: August 6, 2025"]})]})}),We=({activeTab:a,onTabChange:c})=>e.jsxs("div",{className:"custom-buttons-container",children:[e.jsx("div",{className:`custom-tab-button ${a==="词条详细数据"?"active":""}`,children:e.jsx("a",{href:"#",onClick:r=>{r.preventDefault(),c("词条详细数据")},children:"词条详细数据"})}),e.jsx("div",{className:`custom-tab-button ${a==="传说武器详情"?"active":""}`,children:e.jsx("a",{href:"#",onClick:r=>{r.preventDefault(),c("传说武器详情")},children:"传说武器详情"})}),e.jsx("div",{className:`custom-tab-button ${a==="角色数据"?"active":""}`,children:e.jsx("a",{href:"#",onClick:r=>{r.preventDefault(),c("角色数据")},children:"角色数据"})}),e.jsx("div",{className:`custom-tab-button ${a==="功能4"?"active":""}`,children:e.jsx("a",{href:"#",onClick:r=>{r.preventDefault(),c("功能4")},children:"功能4"})})]}),Ve="modulepreload",qe=function(a){return"/NightreignQuickRef/"+a},ae={},I=function(c,r,l){let t=Promise.resolve();if(r&&r.length>0){let m=function(n){return Promise.all(n.map(i=>Promise.resolve(i).then(g=>({status:"fulfilled",value:g}),g=>({status:"rejected",reason:g}))))};document.getElementsByTagName("link");const d=document.querySelector("meta[property=csp-nonce]"),o=d?.nonce||d?.getAttribute("nonce");t=m(r.map(n=>{if(n=qe(n),n in ae)return;ae[n]=!0;const i=n.endsWith(".css"),g=i?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${n}"]${g}`))return;const v=document.createElement("link");if(v.rel=i?"stylesheet":Ve,i||(v.as="script"),v.crossOrigin="",v.href=n,o&&v.setAttribute("nonce",o),document.head.appendChild(v),i)return new Promise((f,b)=>{v.addEventListener("load",f),v.addEventListener("error",()=>b(new Error(`Unable to preload CSS for ${n}`)))})}))}function u(d){const o=new Event("vite:preloadError",{cancelable:!0});if(o.payload=d,window.dispatchEvent(o),!o.defaultPrevented)throw d}return t.then(d=>{for(const o of d||[])o.status==="rejected"&&u(o.reason);return c().catch(u)})},ce={能力:"blue",攻击力:"red","技艺/绝招":"orange","魔法/祷告":"purple",减伤率:"green",对异常状态的抵抗力:"cyan",恢复:"lime",行动:"geekblue",队伍成员:"magenta",仅限特定角色:"gold",仅限特定武器:"volcano","出击时的武器（战技）":"geekblue","出击时的武器（附加）":"blue",出击时的道具:"orange",场地环境:"green",庇佑:"purple",不甘:"volcano"},{Search:B}=je,Ue=[{value:"能力",label:"能力"},{value:"攻击力",label:"攻击力"},{value:"技艺/绝招",label:"技艺/绝招"},{value:"魔法/祷告",label:"魔法/祷告"},{value:"减伤率",label:"减伤率"},{value:"对异常状态的抵抗力",label:"对异常状态的抵抗力"},{value:"恢复",label:"恢复"},{value:"行动",label:"行动"},{value:"队伍成员",label:"队伍成员"},{value:"仅限特定角色",label:"仅限特定角色"},{value:"仅限特定武器",label:"仅限特定武器"},{value:"出击时的武器（战技）",label:"出击时的武器（战技）"},{value:"出击时的武器（附加）",label:"出击时的武器（附加）"},{value:"出击时的道具",label:"出击时的道具"},{value:"场地环境",label:"场地环境"}],Je=[{value:"庇佑",label:"庇佑"},{value:"不甘",label:"不甘"}],re=a=>{const{label:c,value:r,closable:l,onClose:t}=a,u=o=>{o.preventDefault(),o.stopPropagation()},d=ce[r]||"default";return e.jsx(V,{color:d,onMouseDown:u,closable:l,onClose:t,style:{marginInlineEnd:4},children:c})},ne=a=>a&&ce[a]||"default",se=()=>{const[a,c]=w.useState(""),[r,l]=w.useState([]),[t,u]=w.useState([]),[d,o]=w.useState(1),[m,n]=w.useState("局外词条"),[i,g]=w.useState({outsiderEntries:[],talismanEntries:[],inGameEntries:[],otherEntries:[],loading:!0});w.useEffect(()=>{(async()=>{try{const[h,s,x,y]=await Promise.all([I(()=>import("./outsider_entries_zh-CN-UjTIhBhp.js"),[]),I(()=>import("./talisman_entries_zh-CN-HRoYNJSU.js"),[]),I(()=>import("./in-game_entries_zh-CN-DtCckeFL.js"),[]),I(()=>import("./other_entries_zh-CN-DTtQGPTw.js"),[])]);g({outsiderEntries:h.default,talismanEntries:s.default,inGameEntries:x.default,otherEntries:y.default,loading:!1})}catch(h){console.error("Failed to load data:",h),H.error("数据加载失败"),g(s=>({...s,loading:!1}))}})()},[]);const v=(p,h,s)=>{let x=p;if(s&&s.length>0&&(x=x.filter(j=>s.includes(j.entry_type||""))),!h.trim())return x;const y=h.toLowerCase();return x.filter(j=>j.entry_name?.toLowerCase().includes(y)||j.explanation?.toLowerCase().includes(y)||j.entry_type?.toLowerCase().includes(y)||j.superposability?.toLowerCase().includes(y)||j.talisman?.toLowerCase().includes(y)||j.entry_id?.toLowerCase().includes(y))},f=[{title:"词条名称",dataIndex:"entry_name",key:"entry_name",width:170},{title:"解释",dataIndex:"explanation",key:"explanation",width:270,render:p=>p||"-"},{title:"词条类型",dataIndex:"entry_type",key:"entry_type",align:"center",width:80,render:p=>p?e.jsx(V,{color:ne(p),children:p}):"-"},{title:"叠加性",dataIndex:"superposability",key:"superposability",width:55,align:"center",filters:[{text:"可叠加",value:"可叠加"},{text:"不可叠加",value:"不可叠加"},{text:"未知",value:"未知"}],onFilter:(p,h)=>h.superposability===p},{title:"词条ID",dataIndex:"entry_id",key:"entry_id",width:50,align:"center"}],b=[{title:"护符",dataIndex:"talisman",key:"talisman",width:100,render:p=>p||"-"},{title:"词条名称",dataIndex:"entry_name",key:"entry_name",width:150},{title:"解释",dataIndex:"explanation",key:"explanation",width:300,render:p=>p||"-"},{title:"词条ID",dataIndex:"entry_id",key:"entry_id",width:50}],S=[{title:"词条名称",dataIndex:"entry_name",key:"entry_name",width:150},{title:"解释",dataIndex:"explanation",key:"explanation",width:400,render:p=>p||"-"},{title:"词条ID",dataIndex:"entry_id",key:"entry_id",width:50}],E=[{title:"词条名称",dataIndex:"entry_name",key:"entry_name",width:150},{title:"解释",dataIndex:"explanation",key:"explanation",width:400,render:p=>p||"-"},{title:"词条类型",dataIndex:"entry_type",key:"entry_type",width:50,render:p=>p?e.jsx(V,{color:ne(p),children:p}):"-"},{title:"词条ID",dataIndex:"entry_id",key:"entry_id",width:50}],_=p=>{let h=[],s;switch(p){case"局外词条":h=i.outsiderEntries,s=f,h=v(h,a,r);break;case"护符词条":h=i.talismanEntries,s=b,h=v(h,a);break;case"局内词条":h=i.inGameEntries,s=S,h=v(h,a);break;case"其他词条":h=i.otherEntries,s=E,h=v(h,a,t);break;default:h=i.outsiderEntries,s=f,h=v(h,a,r)}return e.jsx(A,{columns:s,dataSource:h,rowKey:"entry_id",pagination:{current:d,pageSize:15,showSizeChanger:!1,showQuickJumper:!1,showTotal:(x,y)=>`第 ${y[0]}-${y[1]} 条，共 ${x} 条`,onChange:x=>o(x),style:{marginTop:"25px"}},scroll:{x:p==="局外词条"?900:p==="护符词条"?800:m==="局内词条"?700:650},size:"middle",loading:i.loading})},N=p=>i.loading?e.jsx("div",{className:"loading-container",children:e.jsx(Se,{tip:"加载中..."})}):p==="局外词条"?e.jsxs("div",{className:"filter-search-row",children:[e.jsx(B,{placeholder:`搜索 ${p} 关键字`,onSearch:h=>{c(h),o(1)},className:"custom-search-input",allowClear:!0}),e.jsx(Q,{className:"outsider-type-select",mode:"multiple",allowClear:!0,tagRender:re,placeholder:"按词条类型筛选（最多3项）",value:r,onChange:h=>{if(h&&h.length>3){H.warning("最多只能选择3个词条类型");return}l(h),o(1)},options:Ue,maxTagPlaceholder:h=>`+${h.length}...`,maxTagCount:3,maxCount:3})]}):p==="其他词条"?e.jsxs("div",{className:"filter-search-row",children:[e.jsx(B,{placeholder:`搜索 ${p} 关键字`,onSearch:h=>{c(h),o(1)},className:"custom-search-input",allowClear:!0}),e.jsx(Q,{className:"outsider-type-select",mode:"multiple",allowClear:!0,tagRender:re,placeholder:"按词条类型筛选",value:t,onChange:h=>{u(h),o(1)},options:Je,maxTagPlaceholder:h=>`+${h.length}...`})]}):e.jsx("div",{className:"search-container",children:e.jsx(B,{placeholder:`搜索 ${p} 关键字`,onSearch:h=>{c(h),o(1)},className:"custom-search-input",allowClear:!0})});return e.jsx(ke,{activeKey:m,onChange:p=>n(p),items:[{key:"局外词条",label:"局外词条",children:e.jsxs("div",{children:[N("局外词条"),_("局外词条")]})},{key:"护符词条",label:"护符词条",children:e.jsxs("div",{children:[N("护符词条"),_("护符词条")]})},{key:"局内词条",label:"局内词条",children:e.jsxs("div",{children:[N("局内词条"),_("局内词条")]})},{key:"其他词条",label:"其他词条",children:e.jsxs("div",{children:[N("其他词条"),_("其他词条")]})}],className:"custom-tabs"})},{Title:He,Text:Qe}=$,Ge=({functionName:a})=>e.jsxs("div",{style:{textAlign:"center",padding:"40px"},children:[e.jsx(He,{level:3,children:a}),e.jsx(Qe,{type:"secondary",children:"此功能正在开发中..."})]}),ie=["追踪者","守护者","铁之眼","女爵","无赖","复仇者","隐士","执行者"],Ke=a=>{const c=a[0];return Object.entries(c).map(([r,l],t)=>({weapon_id:`LW${String(t+1).padStart(3,"0")}`,weapon_name:r,...l}))},Ye=a=>{const c=a[0];return Object.entries(c).map(([r,l],t)=>({weapon_id:`LW${String(t+1).padStart(3,"0")}`,weapon_name:r,...l}))},de=(a,c)=>{const r=Math.max(...c),l=Math.min(...c),t=r-l;if(t===0)return"var(--color-primary-300)";const u=(a-l)/t;return document.body.getAttribute("tomato-theme")==="dark"?u<.25?"rgba(47, 84, 235, 0.1)":u<.5?"rgba(47, 84, 235, 0.2)":u<.8?"rgba(47, 84, 235, 0.3)":"rgba(47, 84, 235, 0.4)":u<.25?"rgba(237, 242, 255, 0.3)":u<.5?"rgba(224, 232, 255, 0.5)":u<.8?"rgba(191, 207, 255, 0.7)":"rgba(147, 167, 255, 0.9)"},Ze=()=>{const a=document.body.getAttribute("tomato-theme")==="dark",c=[{range:"低",threshold:.25,valueRange:"0 ~ 25%"},{range:"较低",threshold:.5,valueRange:"25% ~ 50%"},{range:"较高",threshold:.8,valueRange:"50% ~ 80%"},{range:"高",threshold:1,valueRange:"80% ~ 100%"}];return e.jsxs("div",{className:"color-legend-container",style:{marginBottom:"12px",padding:"12px 16px",backgroundColor:a?"rgba(255,255,255,0.05)":"rgba(0,0,0,0.03)",borderRadius:"6px"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"16px",marginBottom:"8px",flexWrap:"wrap"},children:[e.jsx("span",{style:{fontSize:"12px",color:"var(--text-secondary)"},children:"颜色映射："}),e.jsx("div",{style:{display:"flex",gap:"10px",flexWrap:"wrap"},children:c.map((r,l)=>e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[e.jsx("div",{style:{width:"16px",height:"16px",borderRadius:"3px",backgroundColor:de(r.threshold,[0,1])}}),e.jsxs("span",{style:{fontSize:"12px",display:"flex",gap:"4px"},children:[e.jsx("span",{children:r.range}),e.jsxs("span",{style:{color:"var(--text-secondary)"},children:["（",r.valueRange,"）"]})]})]},l))})]}),e.jsx("div",{style:{paddingTop:"8px",borderTop:`1px solid ${a?"rgba(255,255,255,0.08)":"rgba(0,0,0,0.08)"}`,fontSize:"12px",color:"var(--text-secondary)"},children:"映射原理：按行计算（当前值 - 最小值）/（最大值 - 最小值)，将结果归一化为0-100%范围，数值越高颜色越深。"})]})},Xe=()=>{const[a,c]=G.useState(0),r=G.useRef(null),[l,t]=w.useState({weaponCharacterData:[],weaponEffectData:[],loading:!0});w.useEffect(()=>{(async()=>{try{const b=await I(()=>import("./weapon_character-1Z7PUvAP.js"),[]),S=await I(()=>import("./weapon_effect-uvqGJ4g4.js"),[]);t({weaponCharacterData:Ke(b.default),weaponEffectData:Ye(S.default),loading:!1})}catch(b){console.error("Failed to load data:",b),t({weaponCharacterData:[],weaponEffectData:[],loading:!1})}})()},[]);const{weaponCharacterData:u,weaponEffectData:d,loading:o}=l,m=[{title:"武器名称",dataIndex:"weapon_name",key:"weapon_name",width:110,fixed:"left",render:f=>e.jsx("span",{className:"legendary-weapon-text-center",children:f})},...ie.map(f=>({title:f,dataIndex:f,key:f,width:70,align:"center",render:(b,S)=>{const E=ie.map(_=>S[_]);return e.jsx("div",{className:"heatmap-cell legendary-weapon-heatmap-cell",style:{backgroundColor:de(b,E),width:"90%",height:"80%",margin:"0 auto",borderRadius:"6px",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"13px"},children:b})}}))],n=[{title:"武器名称",dataIndex:"weapon_name",key:"weapon_name",width:120,align:"center",render:f=>e.jsx("span",{className:"legendary-weapon-text-center",children:f})},{title:"类型",dataIndex:"类型",key:"类型",width:80,align:"center"},{title:"特效",dataIndex:"特效",key:"特效",width:120,align:"center"},{title:"描述",dataIndex:"描述",key:"描述",width:300},{title:"削韧",dataIndex:"削韧",key:"削韧",width:150,align:"center"}],i=e.jsxs("div",{className:"legendary-weapon-table-container",children:[e.jsx(Ze,{}),e.jsx(A,{className:"heatmap-table",columns:m,dataSource:u,rowKey:"weapon_id",pagination:!1,size:"small"})]}),g=e.jsx("div",{className:"legendary-weapon-table-container",children:e.jsx(A,{columns:n,dataSource:d,rowKey:"weapon_id",pagination:!1,size:"small"})}),v=e.jsx("div",{className:"custom-steps-container legendary-weapon-steps-container",children:e.jsx(_e,{size:"small",current:a,onChange:f=>{c(f),r.current?.goTo(f)},items:[{title:"全角色传说武器面板"},{title:"传说武器庇佑效果"}]})});return o?e.jsx("div",{className:"legendary-weapon-container",style:{padding:"16px",textAlign:"center"},children:e.jsx("div",{children:"加载中..."})}):e.jsxs("div",{className:"legendary-weapon-container",style:{padding:"16px"},children:[v,e.jsxs(Ee,{ref:r,infinite:!1,dots:!1,beforeChange:(f,b)=>c(b),className:"legendary-weapon-carousel",children:[e.jsx("div",{children:i}),e.jsx("div",{children:g})]})]})},et=a=>{const c=localStorage.getItem("theme"),r=window.matchMedia("(prefers-color-scheme: dark)").matches;let l=!1;c?l=c==="dark":l=r,a(l),l?document.body.setAttribute("tomato-theme","dark"):document.body.removeAttribute("tomato-theme")},tt=a=>{const c=window.matchMedia("(prefers-color-scheme: dark)"),r=l=>{if(!localStorage.getItem("theme")){const t=l.matches;a(t),t?document.body.setAttribute("tomato-theme","dark"):document.body.removeAttribute("tomato-theme")}};return c.addEventListener("change",r),()=>{c.removeEventListener("change",r)}},z=()=>{const a=localStorage.getItem("theme");return a||(window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light")},at=[{name:"追踪者（翻滚）",type:"无敌帧",value:26},{name:"追踪者（翻滚）",type:"非无敌帧",value:14},{name:"铁之眼（翻滚）",type:"无敌帧",value:26},{name:"铁之眼（翻滚）",type:"非无敌帧",value:14},{name:"复仇者（翻滚）",type:"无敌帧",value:26},{name:"复仇者（翻滚）",type:"非无敌帧",value:14},{name:"执行者（翻滚）",type:"无敌帧",value:26},{name:"执行者（翻滚）",type:"非无敌帧",value:14},{name:"守护者（闪避）",type:"无敌帧",value:20},{name:"守护者（闪避）",type:"非无敌帧",value:14},{name:"无赖（翻滚）",type:"无敌帧",value:24},{name:"无赖（翻滚）",type:"非无敌帧",value:18},{name:"隐士（闪避）",type:"无敌帧",value:30},{name:"隐士（闪避）",type:"非无敌帧",value:10},{name:"女爵（闪避）",type:"无敌帧",value:20},{name:"女爵（闪避）",type:"非无敌帧",value:6},{name:"女爵（双重踏步）",type:"无敌帧",value:22},{name:"女爵（双重踏步）",type:"非无敌帧",value:16},{name:"女爵（后空翻）",type:"无敌帧",value:22},{name:"女爵（后空翻）",type:"非无敌帧",value:16},{name:"女爵（闪身）",type:"无敌帧",value:12},{name:"女爵（闪身）",type:"非无敌帧",value:12}],{Title:U,Text:oe}=$,rt=()=>{const[a,c]=w.useState(z()),[r,l]=w.useState(0),[t,u]=w.useState(!1);w.useEffect(()=>{const i=()=>{const S=z();S!==a&&(u(!0),setTimeout(()=>{c(S),l(E=>E+1),setTimeout(()=>{u(!1)},300)},150))};i();const g=()=>{setTimeout(i,50)},v=window.matchMedia("(prefers-color-scheme: dark)"),f=()=>{i()},b=()=>{setTimeout(i,50)};return window.addEventListener("storage",g),window.addEventListener("themeChange",b),v.addEventListener("change",f),()=>{window.removeEventListener("storage",g),window.removeEventListener("themeChange",b),v.removeEventListener("change",f)}},[a]),w.useEffect(()=>{const i=q.throttle(()=>{l(f=>f+1)},300),g=()=>{i()},v=()=>{setTimeout(i,100)};return window.addEventListener("resize",g),window.addEventListener("dragend",v),()=>{window.removeEventListener("resize",g),window.removeEventListener("dragend",v)}},[]),w.useEffect(()=>{const i=setTimeout(()=>{window.dispatchEvent(new Event("resize"))},100);return()=>clearTimeout(i)},[]);const d=at,o={};d.forEach(i=>{o[i.name]||(o[i.name]=0),o[i.name]+=i.value});const m=Object.entries(o).map(([i,g])=>({type:"text",data:[i,g],style:{text:`${g}`,textBaseline:"bottom",position:"top",textAlign:"center",fontSize:14,fill:a==="dark"?"rgba(232, 232, 232, 0.85)":"rgb(0, 158, 231)"},tooltip:!1})),n={data:d,xField:"name",yField:"value",stack:!0,colorField:"type",theme:a,height:400,autoFit:!0,label:{text:"value",textBaseline:"bottom",position:"inside"},tooltip:!1,scale:{y:{domainMax:60}},axis:{x:{label:{autoRotate:!1,autoHide:!1,autoEllipsis:!1,style:{fill:a==="dark"?"#ffffff":"#000000",fontSize:12}},line:{style:{stroke:a==="dark"?"#ffffff":"#000000",lineWidth:1}},tickLine:{style:{stroke:a==="dark"?"#ffffff":"#000000",lineWidth:1}},labelFormatter:i=>i.replace(/（([^）]+)）/g,`
（$1）`)},y:{label:{style:{fill:a==="dark"?"#ffffff":"#000000",fontSize:12}},line:{style:{stroke:a==="dark"?"#ffffff":"#000000",lineWidth:1}},tickLine:{style:{stroke:a==="dark"?"#ffffff":"#000000",lineWidth:1}},labelFormatter:i=>`${i}帧`}},style:{radius:10,fillOpacity:.8},annotations:m};return e.jsxs("div",{className:"content-wrapper card-item",children:[e.jsx("div",{className:"card-header",children:e.jsx(U,{level:5,className:"character-card-title",children:"翻滚/闪避 帧数对比"})}),e.jsxs("div",{className:"card-body",children:[e.jsx("div",{style:{marginBottom:"10px",color:"var(--theme-text-secondary)",fontSize:"14px"},children:"提示：图中为60帧情况下的数据（1帧即1/60秒）"}),e.jsx("div",{className:`dodge-frames-chart-container ${t?"theme-transitioning":""}`,style:{height:400,width:"100%",padding:"20px 0",minHeight:"400px",position:"relative"},children:e.jsx(Ce,{...n},`dodge-frames-${r}`)}),e.jsx(Te,{message:"机制说明",description:e.jsxs("div",{className:"dodge-frames-tips",children:[e.jsx("div",{className:"tip-item",children:"1. 黑夜君临中没有负重影响人物翻滚 / 闪避的机制，角色直接决定回避性能，人物体型 / 身高与回避性能无关。"}),e.jsx("div",{className:"tip-item",children:'2. 蓝色部分表示 "无敌帧"，绿色部分表示非无敌帧。从0帧开始，非无敌帧结束后即可自由移动。（无敌帧 + 非无敌帧 = 翻滚/闪避动画总帧长）'}),e.jsx("div",{className:"tip-item",children:"3. 如果角色在动作的无敌帧结束前执行了其他动作（如进行轻攻击），那无敌帧会在执行其他动作的瞬间中断，同时这也会减少整个闪避动作的位移距离。"}),e.jsx("div",{className:"tip-item",children:"4. 各数值对应的秒数计算：帧数数值× (1/60秒); 举例: 追踪者翻滚总时长为40帧，在60帧情况下，对应的时长为 40×(1/60)s = 2/3s ≈ 0.67s"})]}),type:"info",showIcon:!1,style:{marginTop:"20px"}})]})]})},nt=()=>{const[a,c]=w.useState({characterStatesData:[],magicMoveData:[],loading:!0});w.useEffect(()=>{(async()=>{try{const[x,y]=await Promise.all([I(()=>import("./character_states-DihYTfwf.js"),[]),I(()=>import("./magic_move_list-g3L7h1cl.js"),[])]);c({characterStatesData:x.default,magicMoveData:y.default,loading:!1})}catch(x){console.error("Failed to load character data:",x),c(y=>({...y,loading:!1}))}})()},[]);const r=a.characterStatesData[0]||{},l=a.magicMoveData||[],t=[{title:"属性痕",dataIndex:"属性痕",key:"属性痕",width:"12%",align:"center"},{title:"属性图标",dataIndex:"属性图标",key:"属性图标",width:"12%",align:"center"},{title:"混合魔法",dataIndex:"混合魔法",key:"混合魔法",width:"12%",align:"center"},{title:"总伤害",dataIndex:"总伤害",key:"总伤害",width:"9%",align:"center"},{title:"持续时间",dataIndex:"持续时间",key:"持续时间",width:"9%",align:"center"},{title:"混合魔法效果",dataIndex:"混合魔法效果",key:"混合魔法效果",ellipsis:!1,align:"left",render:s=>e.jsx("div",{style:{wordBreak:"break-word",whiteSpace:"pre-wrap",textAlign:"left",lineHeight:"1.5",padding:"4px 0"},children:s})}],u=()=>{const s=Object.values(r)[0];return s?Object.keys(s):[]},d=Object.keys(r),[o,m]=w.useState(["追踪者","守护者","女爵"]),[n,i]=w.useState(z()),[g,v]=w.useState(0),[f,b]=w.useState(!1);w.useEffect(()=>{const s=()=>{const C=z();C!==n&&(b(!0),setTimeout(()=>{i(C),v(D=>D+1),setTimeout(()=>{b(!1)},300)},150))};s();const x=()=>{setTimeout(s,50)},y=window.matchMedia("(prefers-color-scheme: dark)"),j=()=>{s()},k=()=>{setTimeout(s,50)};return window.addEventListener("storage",x),window.addEventListener("themeChange",k),y.addEventListener("change",j),()=>{window.removeEventListener("storage",x),window.removeEventListener("themeChange",k),y.removeEventListener("change",j)}},[n]),w.useEffect(()=>{const s=q.throttle(()=>{v(j=>j+1)},300),x=()=>{s()},y=()=>{setTimeout(s,100)};return window.addEventListener("resize",x),window.addEventListener("dragend",y),()=>{window.removeEventListener("resize",x),window.removeEventListener("dragend",y)}},[]),w.useEffect(()=>{const s=()=>{const j=document.querySelector(".character-attributes-table")?.closest("div"),k=document.getElementById("radar-chart-container");if(j&&k){const C=j.getBoundingClientRect().height,D=Math.max(C,400);k.style.height=`${D}px`}},x=q.throttle(s,200);s();const y=setTimeout(x,100);return()=>{clearTimeout(y)}},[o]);const S=[{title:"角色",dataIndex:"character",key:"character",width:60,fixed:"left",render:s=>e.jsx(oe,{style:{color:"var(--color-text-1)"},children:s})},...u().filter(s=>s!=="擅长武器").map(s=>({title:s,dataIndex:s,key:s,width:46,align:"center",render:x=>{const y=j=>{switch(j){case"S":return"character-attribute-value s-rank";case"A":return"character-attribute-value a-rank";case"B":return"character-attribute-value b-rank";case"C":return"character-attribute-value c-rank";case"D":return"character-attribute-value d-rank";default:return"character-attribute-value default"}};return e.jsx(oe,{className:y(x),strong:!0,children:x})}}))],E=()=>{const x=u().filter(y=>y!=="擅长武器");return d.map(y=>{const j={key:y,character:y};return x.forEach(k=>{j[k]=r[y]?.[k]||"-"}),j})},_=s=>({S:5,A:4,B:3,C:2,D:1})[s]||0,N=w.useMemo(()=>{const s=[],y=u().filter(k=>k!=="擅长武器"&&["生命","专注","耐力","力量","灵巧","智力","信仰","感应"].includes(k));return o.map(k=>k.toString()).forEach(k=>{r[k]&&y.forEach(C=>{const D=r[k][C];s.push({item:C,type:k,score:_(D),level:D,value:D})})}),s},[r,o]),p=w.useMemo(()=>u().filter(x=>x!=="擅长武器"&&["生命","专注","耐力","力量","灵巧","智力","信仰","感应"].includes(x)),[]),h={selectedRowKeys:o,onChange:s=>{s.length<=8&&m(s)},getCheckboxProps:s=>({name:s.character})};return e.jsxs("div",{className:"character-data-container",children:[e.jsxs("div",{className:"content-wrapper card-item",children:[e.jsx("div",{className:"card-header",children:e.jsx(U,{level:5,className:"character-card-title",children:"基础属性"})}),e.jsxs("div",{className:"card-body",children:[e.jsx("div",{style:{marginBottom:"10px",color:"var(--theme-text-secondary)",fontSize:"14px"},children:"提示：可勾选多个角色进行对比"}),e.jsxs("div",{style:{display:"flex",gap:"20px",marginTop:"20px"},children:[e.jsx("div",{style:{flex:"1",minWidth:"0"},children:e.jsx(A,{rowSelection:h,columns:S,dataSource:E(),pagination:!1,size:"middle",scroll:{x:"max-content"},className:"character-attributes-table"})}),e.jsx("div",{className:`radar-chart-container ${f?"theme-transitioning":""}`,style:{flex:"1",minWidth:"400px",minHeight:"400px"},id:"radar-chart-container",children:o.length>0?e.jsx(K,{data:N,xField:"item",yField:"score",colorField:"type",height:400,theme:n,axis:{x:{grid:!0,gridLineWidth:1,tick:!1,gridLineDash:[0,0]},y:{zIndex:1,title:!1,gridLineWidth:1,gridLineDash:[0,0],gridAreaFill:(s,x)=>x%2===1?"rgba(0, 0, 0, 0.04)":"",labelFormatter:s=>({1:"D",2:"C",3:"B",4:"A",5:"S"})[s]||""}},point:{size:4},scale:{x:{padding:50,align:0},y:{tickCount:5,domainMin:0,domainMax:5}},style:{lineWidth:2},tooltip:{items:[{channel:"y",valueFormatter:s=>({1:"D",2:"C",3:"B",4:"A",5:"S"})[s]||s.toString()}]},area:{style:{fillOpacity:.1}},line:{style:{lineWidth:2}}},`radar-main-${g}`):e.jsx("div",{className:`radar-wrapper ${f?"theme-transitioning":""}`,style:{height:"400px",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center"},children:e.jsx(K,{data:p.map(s=>({item:s,type:"",score:0})),xField:"item",yField:"score",colorField:"type",height:350,theme:n,axis:{x:{grid:!0,gridLineWidth:1,tick:!1,gridLineDash:[0,0]},y:{zIndex:1,title:!1,gridLineWidth:1,gridLineDash:[0,0],tick:{formatter:s=>({1:"D",2:"C",3:"B",4:"A",5:"S"})[s]||""}}},scale:{x:{padding:.5,align:0},y:{tickCount:5,domainMin:0,domainMax:5}},legend:!1,point:{size:0},line:{style:{lineWidth:0}},area:!1},`radar-empty-${g}`)})})]})]})]}),e.jsxs("div",{className:"content-wrapper card-item",children:[e.jsx("div",{className:"card-header",children:e.jsx(U,{level:5,className:"character-card-title",children:"隐士出招表"})}),e.jsxs("div",{className:"card-body",children:[e.jsx("div",{style:{marginBottom:"10px",color:"var(--theme-text-secondary)",fontSize:"14px"},children:"提示：总伤害为角色15级时数据"}),e.jsx(A,{dataSource:l,columns:t,pagination:!1,size:"small",bordered:!0,rowKey:s=>s.属性痕,scroll:{x:"100%"},style:{wordBreak:"break-word",whiteSpace:"pre-wrap"}})]})]}),e.jsx(rt,{})]})};function st(){const[a,c]=w.useState("词条详细数据"),[r,l]=w.useState(!1),[t,u]=w.useState(!1),d=()=>{const n=!r;l(n),n?document.body.setAttribute("tomato-theme","dark"):document.body.removeAttribute("tomato-theme"),localStorage.setItem("theme",n?"dark":"light"),window.dispatchEvent(new Event("themeChange"))},o=()=>{u(!t)};w.useEffect(()=>{et(l)},[]),w.useEffect(()=>tt(l),[]);const m=()=>{switch(a){case"词条详细数据":return e.jsx(se,{});case"传说武器详情":return e.jsx(Xe,{});case"角色数据":return e.jsx(nt,{});case"功能4":return e.jsx(Ge,{functionName:"功能4"});default:return e.jsx(se,{})}};return e.jsx(le,{theme:{algorithm:r?De.darkAlgorithm:void 0,token:{colorPrimary:r?R[4]:R[6],colorPrimaryHover:r?R[3]:R[5],colorPrimaryActive:r?R[5]:R[7]}},children:e.jsxs("div",{className:"app-container",children:[e.jsx(Fe,{isDarkMode:r,onToggleTheme:d,onToggleLanguage:o,onTabChange:c}),e.jsx(We,{activeTab:a,onTabChange:c}),a==="角色数据"?m():e.jsx("div",{className:"content-wrapper",children:e.jsx("div",{className:"tabs-container",children:m()})}),e.jsx(Be,{})]})})}Le.createRoot(document.getElementById("root")).render(e.jsx(w.StrictMode,{children:e.jsx(le,{children:e.jsx(st,{})})}));
